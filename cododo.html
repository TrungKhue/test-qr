<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C·ªù ƒë·ªè ‚Äì Ghi nh·∫≠n vi ph·∫°m</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        body {
            background: #f3f6fb;
            font-family: "Segoe UI", sans-serif;
        }

        .navbar {
            background: #ffffff;
            border-bottom: 1px solid #e5e8ec;
        }

        .brand-logo {
            display: flex;
            align-items: center;
            font-size: 20px;
            font-weight: 600;
            color: #2b3a67;
        }

        .brand-logo i {
            font-size: 26px;
            margin-right: 8px;
            color: #008cff;
        }

        .menu-btn {
            background: #ffffff;
            border: 1px solid #d0d5df;
        }

        .card {
            border: none;
            border-radius: 14px;
        }

        .card-title {
            font-size: 20px;
            color: #2b3a67;
            font-weight: 600;
        }

        .qr-icon {
            width: 70px;
            height: 70px;
            background: #e9fff4;
            color: #00a067;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            border-radius: 50%;
            margin: auto;
        }

        .btn-qr {
            width: 100%;
            background: #009d63;
            border: none;
            padding: 12px;
            color: white;
            font-weight: 500;
            border-radius: 10px;
        }

        #qr-reader {
            width: 100%;
            margin-top: 15px;
            display: none;
        }
    </style>
</head>

<body>

    <!-- NAVBAR -->
    <nav class="navbar px-4 py-3">
        <div class="d-flex w-100 justify-content-between align-items-center">
            <div class="brand-logo">
                <i class="bi bi-qr-code-scan"></i> C·ªù ƒë·ªè ‚Äì Ghi nh·∫≠n vi ph·∫°m
            </div>
            <div class="dropdown">
                <button class="btn menu-btn" data-bs-toggle="dropdown">
                    <i class="bi bi-person-circle"></i> Menu
                </button>
                <ul class="dropdown-menu dropdown-menu-end shadow">
                    <li><a class="dropdown-item" href="#">Th√¥ng tin t√†i kho·∫£n</a></li>
                    <li><a class="dropdown-item" href="#">ƒê·ªïi m·∫≠t kh·∫©u</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- MAIN -->
    <div class="container py-4">
        <div class="row g-4">

            <!-- QU√âT QR -->
            <div class="col-lg-6">
                <div class="card p-4 shadow-sm text-center">
                    <div class="qr-icon mb-3">
                        <i class="bi bi-qr-code-scan"></i>
                    </div>
                    <h4 class="fw-bold mb-2">Qu√©t m√£ QR</h4>
                    <p class="text-muted">Qu√©t m√£ QR ƒë·ªÉ l·∫•y th√¥ng tin h·ªçc sinh</p>

                    <button class="btn-qr" id="btnScanQR">
                        <i class="bi bi-camera-video"></i> B·∫Øt ƒë·∫ßu qu√©t QR
                    </button>

                    <div id="qr-reader"></div>
                </div>
            </div>

            <!-- FORM -->
            <div class="col-lg-6">
                <div class="card p-4 shadow-sm">
                    <h4 class="card-title">
                        <i class="bi bi-pencil-square me-2"></i>Ghi vi ph·∫°m
                    </h4>

                    <div class="mb-3">
                        <label class="form-label">M√£ xe</label>
                        <input type="text" id="studentId" class="form-control" readonly>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">T√™n h·ªçc sinh</label>
                        <input type="text" id="studentName" class="form-control" readonly>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">L·ªõp</label>
                        <input type="text" id="studentClass" class="form-control" readonly>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Lo·∫°i vi ph·∫°m</label>
                        <select class="form-select" id="violationType">
                            <option>ƒê·ªÉ xe sai n∆°i quy ƒë·ªãnh</option>
                            <option>Kh√¥ng ƒë·ªôi m≈© b·∫£o hi·ªÉm</option>
                            <option>ƒêi h·ªçc tr·ªÖ</option>
                        </select>
                    </div>

                    <button class="btn btn-success w-100" id="btnSubmit">
                        ‚úî Ghi nh·∫≠n (demo)
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL TH√ÄNH C√îNG -->
    <div class="modal fade" id="successModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content text-center p-4">
                <div class="text-success fs-1 mb-2">
                    <i class="bi bi-check-circle-fill"></i>
                </div>
                <h4 class="fw-bold">Ghi nh·∫≠n th√†nh c√¥ng</h4>
                <p class="text-muted mb-3">
                    Vi ph·∫°m ƒë√£ ƒë∆∞·ª£c ghi nh·∫≠n (demo)
                </p>
                <button class="btn btn-success" data-bs-dismiss="modal">
                    OK
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/html5-qrcode"></script>

    <script>
        const btnScan = document.getElementById("btnScanQR");
        const reader = document.getElementById("qr-reader");
        const btnSubmit = document.getElementById("btnSubmit");

        const students = {
            "XE001234": { name: "Nguy·ªÖn VƒÉn An", class: "L·ªõp 11A" },
            "XD102345": { name: "L√™ Minh Tu·∫•n", class: "L·ªõp 12C" },
            "XD998877": { name: "Nguy·ªÖn Ho√†ng Long", class: "L·ªõp 12B" }
        };

        let qr;

        btnScan.onclick = async () => {
            reader.style.display = "block";
            qr = new Html5Qrcode("qr-reader");

            try {
                await qr.start(
                    { facingMode: "environment" },
                    { fps: 10, qrbox: 250 },
                    (text) => {
                        qr.stop();
                        reader.style.display = "none";

                        const st = students[text];
                        if (!st) {
                            alert("Kh√¥ng t√¨m th·∫•y h·ªçc sinh");
                            return;
                        }

                        studentId.value = text;
                        studentName.value = st.name;
                        studentClass.value = st.class;
                    }
                );
            } catch (e) {
                alert("Kh√¥ng m·ªü ƒë∆∞·ª£c camera");
            }
        };

        // üëâ S·ª∞ KI·ªÜN GHI NH·∫¨N TH√ÄNH C√îNG
        btnSubmit.onclick = () => {
            if (!studentId.value) {
                alert("Vui l√≤ng qu√©t QR tr∆∞·ªõc");
                return;
            }

            const modal = new bootstrap.Modal(
                document.getElementById("successModal")
            );
            modal.show();

            // reset form (demo)
            studentId.value = "";
            studentName.value = "";
            studentClass.value = "";
        };
    </script>

</body>

</html>